<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>FieldAR Annotator</title>

    <!-- Manifest for PWA -->
    <link rel="manifest" href="manifest.json">

    <!-- iOS PWA support -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">

    <!-- Annotator Styles -->
    <link rel="stylesheet" href="dist/fab-annotator.css">

    <!-- Annotator Script -->
    <script src="dist/fab-annotator.js"></script>

    <!-- Register Service Worker -->
    <script>
      if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('service-worker.js')
          .then(() => console.log('Service Worker Registered!'))
          .catch(err => console.error('Service Worker Error:', err));
      }
    </script>

    <style>
        body {
            margin: 0;
            padding: 0;
            background: #111;
            font-family: Arial, sans-serif;
            text-align: center;
            color: #fff;
        }
        #main-container {
            margin: 0 auto;
            max-width: 95vw;
        }
        #main-image {
            max-width: 95vw;
            border: 1px solid #ccc;
        }
        canvas {
            display: block;
            margin: 10px auto;
            border: 1px solid #444;
        }
    </style>
</head>

<body>
    <div id="main-container">
        <h2>FieldAR Annotator</h2>
        <!-- Base image for annotation -->
        <img id="main-image" src="icons/Blue_GCPA-removebg-preview.png" alt="Base Image">
    </div>

    <script>
        window.onload = function () {
            const img = document.getElementById("main-image");

            if (!img) {
                console.error("main-image not found!");
                return;
            }

            console.log("Image loaded, initializing annotator...");

            annoFabric.initCanvas("#main-image", {
                annotationTextField:
                    "<select class='form-control' name='annotation-text-field'>" +
                        "<option value='Tag 1'>Tag 1</option>" +
                        "<option value='Tag 2'>Tag 2</option>" +
                        "<option value='Tag 3'>Tag 3</option>" +
                    "</select>",
                canvasHeight: img.clientHeight,
                canvasWidth: img.clientWidth
            });
        };
    </script>
</body>
</html>